function gcloud() {
    # use docker binary if available, else fallback to podman
    if ! $(command -v docker &>/dev/null); then
        local docker_bin=$(which podman)
    else
        local docker_bin=$(which docker)
    fi

    # get whether the config has already been set up
    local CONFIG_EXISTS=$($docker_bin ps -a -q -f name="gcloud-config")

    if [[ -z ${CONFIG_EXISTS} ]]; then
        # we don't have the config, run through first-time setup.
        $docker_bin run -ti --name gcloud-config gcr.io/google.com/cloudsdktool/google-cloud-cli gcloud auth login
    fi

    $docker_bin run -it --rm --volumes-from gcloud-config gcr.io/google.com/cloudsdktool/google-cloud-cli gcloud "$@"
}