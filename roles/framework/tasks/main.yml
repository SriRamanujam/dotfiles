---
- name: Load distribution-specific variables
  include_vars: "{{ item }}"
  with_first_found:
    - "{{ ansible_distribution | lower | replace(' ', '-') }}-{{ ansible_distribution_major_version | lower }}.yml"
    - "{{ ansible_distribution | lower | replace(' ', '-') }}.yml"

- include: scaling.yml
- include: dmcrypt.yml
#- include: udev.yml
  
- name: Configure kernel to default to S3 suspend (S0ix idle is not efficient) (Fedora)
  ansible.builtin.command: grubby --update-kernel=ALL --args=mem_sleep_default=deep
  when: ansible_distribution == "Fedora"
